<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Together We Are One</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    body { margin: 0; font-family: system-ui, sans-serif; background: #111; color: #fafafa;}
    .banner {
      text-align: center; max-width: 540px; margin: 40px auto 16px auto; padding: 16px;
      background: rgba(30,30,30,0.85); border-radius: 14px;
      box-shadow: 0 2px 24px rgba(0,0,0,0.18);
    }
    .banner h1 { margin-top: 0; font-size: 2em; }
    .banner p { margin: 1em 0; }
    #map { width: 100vw; height: 60vh; max-height: 420px; border-radius: 18px; box-shadow: 0 2px 14px rgba(0,0,0,0.25);}
    .hint {text-align:center; font-size: 1.1em; color: #ddd; margin-top: 20px;}
    @media (max-width: 600px) {
      .banner {margin: 14px; padding: 8px;}
      #map {height: 44vh;}
    }
  </style>
</head>
<body>
  <div class="banner">
    <h1>Together We Are One</h1>
    <p>
      Manchmal schauen wir in den Himmel. Vielleicht sehen wir einen Stern, den Mond, ferne Galaxien. Für einen Moment wird uns bewusst, wie klein unser Planet ist. Wie selten – vielleicht sogar einzigartig – das Leben hier ist.
    </p>
    <p>
      Auf diesem winzigen Punkt im Weltall teilen wir unser Leben. Jeder von uns mit einer eigenen Geschichte, aber doch alle miteinander verbunden. Nicht durch Herkunft, Sprache oder Grenzen – sondern durch das Glück, gemeinsam hier zu sein.
    </p>
    <p>
      Manche Menschen spüren in solchen Momenten, dass wir eigentlich eine einzige Gemeinschaft sind. Dass uns mehr verbindet als trennt.
    </p>
    <h3>Hast du das auch schon einmal gefühlt?</h3>
    <strong>Helf’ uns, dieses Gefühl sichtbar zu machen!</strong>
  </div>
  <div id="map"></div>
  <div class="hint">Klicke auf die Karte, um dein Licht zu setzen oder zu verschieben. (Nur ein Licht pro Browser.)</div>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    // Karte initialisieren
    var map = L.map('map').setView([20, 0], 2);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors',
      maxZoom: 18,
    }).addTo(map);

    // Funktion zum Marker speichern/lesen im Browser (localStorage)
    function saveLight(latlng) {
      localStorage.setItem('myLight', JSON.stringify(latlng));
    }
    function loadLight() {
      const data = localStorage.getItem('myLight');
      return data ? JSON.parse(data) : null;
    }

    // Nur ein Marker pro Nutzer
    var myMarker = null;
    var saved = loadLight();
    if(saved) {
      myMarker = L.marker(saved).addTo(map).bindPopup('Das ist dein Licht!').openPopup();
      map.setView(saved, 3);
    }

    // Klick: Marker neu setzen/verschieben
    map.on('click', function(e) {
      if(myMarker) {
        myMarker.setLatLng(e.latlng).openPopup();
      } else {
        myMarker = L.marker(e.latlng).addTo(map).bindPopup('Das ist dein Licht!').openPopup();
      }
      saveLight(e.latlng);
    });
  </script>
</body>
</html>
